<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css"
          integrity="sha256-FdatTf20PQr/rWg+cAKfl6j4/IY3oohFAJ7gVC3M34E=" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/eb648d6e5d.js" crossorigin="anonymous"></script>
    <title>Coffees</title>
</head>
<body>
<div class="container mt-3">
    <div class="card">
        <div class="card-header">
            Coffees
        </div>
        <div class="card-body">
            <table class="table table-striped-columns table-hover">
                <thead>
                <tr>
                    <th>
                        Name
                    </th>
                    <th>
                        Actions
                    </th>
                </tr>
                </thead>
                <tbody id="tbody_names">
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"
        integrity="sha256-AFAYEOkzB6iIKnTYZOdUf9FFje6lOTYdwRJKwTN5mks=" crossorigin="anonymous"></script>
<script>
    function buildRow(coffee) {
        if (!coffee.hasOwnProperty("id") || !coffee.hasOwnProperty("name")) {
            return null;
        } //end if

        let nameData = $("<td>").text(coffee.name);

        let editIcon = $("<i>").addClass("fa-solid fa-pen-to-square");

        let editAnchor = $("<a>").addClass("mr-3")
                                 .attr("href", "javascript:void(0);")
                                 .append(editIcon);

        let deleteIcon = $("<i>").addClass("fa-solid fa-trash-can");

        let deleteAnchor = $("<a>").attr("href", "javascript:void(0);")
                                   .append(deleteIcon);

        let actionsData = $("<td>").append(editAnchor, deleteAnchor);

        return $("<tr>").append(nameData, actionsData);
    } //buildRow

    $(function () {
        $.ajax({
            "type": "GET",
            "url": "http://localhost:8080/api/coffee",
            "success": function (response) {
                if ((response.status !== "SUCCESS") || !response.hasOwnProperty("content")) {
                    return;
                } //end if

                let coffees = response.content;

                let rows = [];

                coffees.forEach(function (coffee) {
                    let row = buildRow(coffee);

                    if (row) {
                        rows.push(row);
                    } //end if
                });

                $("#tbody_names").append(rows);
            }
        });
    });
</script>
</html>